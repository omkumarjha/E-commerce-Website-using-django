{% extends "shop/base.html" %}
{% load static %}

{% block title %} Contact-Page {% endblock %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/contact.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive_home.css' %}">
{% endblock %}

{% block body %} 

<body>
    <!-- This div is only going to display when the form is submitted by user -->
    <div class="submit-contact">
        <div class="left-part">
            <div id = "message1"><strong>Success!:</strong></div>
            <div id = "message2">Contact form has been submitted successfully</div>
        </div>
        <div class="right-part">
            <svg  onclick="cross_clicked()" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
              </svg>
        </div>
    </div>

    <!-- This is the only parent container of the contact file -->
    <div class="parent-container">
        <div class="contact-container">
            <div class="contact-left">
                <h2>Lets talk about everything!</h2>
            </div>
            <div class="contact-right">
                <form class="contact-form" action="/shop/contact" method="post" >
                    {% csrf_token %}

                    <div class="name">
                        <h4>Name</h4>
                        <input type="text" name = "name" id = "name">
                    </div>

                    <div class="email">
                        <h4>Email</h4>
                        <input type="email" name = "email" id = "email">
                    </div>

                    <div class="phone">
                        <h4>Phone</h4>
                        <input type="tel" name="phone" id = "phone">
                    </div>

                    <div class="message">
                        <h4>Message</h4>
                        <textarea name="message" id = "message" cols="60" rows="10"></textarea>
                    </div>
                    <div class="button-form">
                        <input type="submit" value="Submit" onclick="button_clicked()">  
                    </div>

                </form>
            </div>
        </div>
</div>


</body>

{% endblock %}

{% block script %} 
    <script src="{% static 'javascript/contact.js' %}"></script>


    <script type = "text/javascript">

        $('.contact-form').on('submit', function(event){
            event.preventDefault();
            create_post();
        });

        function create_post(){

            $.ajax({
                type: "POST",
                url: "/shop/contact",
                data:{
                    name: $("#name").val(),
                    email: $("#email").val(),
                    phone: $("#phone").val(),
                    message: $("#message").val(),
                    csrfmiddlewaretoken: $("input[name = csrfmiddlewaretoken]").val(),
                },
                success: function(){
                    $("#name").val("");
                    $("#email").val("");
                    $("#phone").val("");
                    $("#message").val("");
                }
            })

        }
    </script>
    
{% endblock %}